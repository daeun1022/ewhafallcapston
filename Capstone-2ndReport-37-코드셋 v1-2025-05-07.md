<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | *ChatBot Diary*
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 37-코드셋 |
| (3) 팀 구성원 | 남다은 (2171011): 리더, *프롬프트 및 프론트엔드* <br> 안지은 (2276182): 팀원, *백엔드*	 |
| (4) 팀 지도교수 | 용환승 교수님 |
| (5) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | 채팅 AI와의 커뮤니케이션, 요약 AI의 자동 일기 작성, 감정 분석 시각화  |
| (7) 과제 내용 요약 | 일기를 쓰고는 싶지만 시간적인 부담이 있거나, 자신의 부정적인 감정 상태를 돌아보고 해소하고 싶지만 그럴 여유가 없는 바쁜 사람들을 타겟 고객으로 하는 서비스.<br> 사용자와 공감하며 대화하는 AI 챗봇과 채팅을 나누면, 요약 AI가 그 날의 대화 내용을 요약해 일기 형식으로 제공하고 사용자의 감정 상태 또한 분석하여 보여준다. 감정 분석 결과는 감정마다 점수로 계산되어 제공되고, 사용자가 한 눈에 인식할 수 있도록 시각화하여 보여진다.<br> **사용자는 실시간 채팅을 통해 자신의 감정을 해소할 수 있고, 시간적인 부담 없이 하루 일과와 감정상태를 종합한 일기를 얻을 수 있으며, 자신의 감정 상태를 진단해볼 수 있다.** |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | 사회적 압박이 크고 바쁜 일상 속에서 사람들은 자신의 감정을 돌아볼 여유를 갖기 쉽지 않습니다. 해소되지 못한 감정은 점점 쌓이게 되며 결국 정신적, 신체적 부진을 일으키고 삶의 질을 저하시킵니다. 실제로 이렇게 일상에 지친 사람들은 점점 늘어나는 추세이며, 저희는 이런 사람들을 저희 프로젝트의 Target Customer로 설정했습니다.<br>이 Target Customer는 **자신의 감정을 주변에 솔직하게 드러내지 못해 외로움을 느끼고, 하루 일과에 쫓겨 일기를 쓰는 것 조차 힘든 시간적 피로를 겪으며, 이미 정신적으로 많이 지쳐 자신의 감정 상태를 돌아볼 여유조차 없을 정도로 정신적 부담을 안고 있는 사람들**입니다. 이런 Target Customer의 특징을 기반으로 저희는 이 과제의 Pain Point를 **스트레스 원인 파악의 어려움, 시간 부족, 사회적 고립, 프라이버시 보장에 관한 걱정** 총 4가지로 도출했습니다.  |
| (2) 기존연구와의 비교 | **1.'답다 - 답장받는 다이어리'** : 사용자가 핵심 감정 중 하나를 선택한 뒤 일기를 작성하면 다이어리가 답장을 보내주는 형태의 서비스 <br><br> 장점 : <br><li> 사용자가 자신의 감정 상태를 잘 파악할 수 있도록 캘린더에 날마다의 감정 상태를 시각화하여 보여줌. <br><li> 사용자의 시간적 부담을 덜어주기 위해 문답형식을 통한 일기 작성 기능을 제공. <br><br> 단점 : <br><li> 사람의 감정은 하나로 딱 잘라 구분하기 어렵고 사용자가 미리 정해진 몇 가지 감정 선택지 중 하나만 선택할 수 있어, 다양한 감정의 결을 담아내기 어렵고 사용자의 실제 감정을 정확하게 반영하기엔 한계가 있음. <br><li> 문답의 질문이 언제, 어디서, 무엇을 등의 간단한 질문으로 한정되어 있어 직접 자유롭게 대화함으로써 도출되는 결과에 비해 하루 일과를 돌아보기에는 부족한 면이 많음. <br><br><br> **2.'심스페이스'** : 사용자가 자신의 감정을 선택하고 일기를 쓰면, 이를 기반으로 사용자의 감정을 추출하고 스트레스,불안감,우울감,열등감 등의 지표별로 점수를 매긴 뒤 시각화하여 보여주는 서비스. 사용자에게 공감해주는 채팅 기능도 함께 제공하지만 대화 기록이 저장되지는 않음. <br><br> 장점 : <br><li> 부정적인 감정에 대한 지표를 계산한 뒤 사용자에게 보여주어 부정적 감정이 쌓이는 것을 조기에 방지할 수 있음. <br><li> 사용자에게 공감해주는 채팅 기능을 통해 단순히 일기를 적는 것으로는 해소하기 어려운 감정을 해소할 수 있게 해줌. <br><br> 단점 : <br><li> 미리 정해진 선택지 중 하나를 고르는 것 만으로는 사용자의 감정을 완벽하게 반영할 수 없음. <br><li> 채팅 기록이 저장되지 않아 나중에 사용자가 대화를 복기하고자 할 때 그 내용을 볼 수 없으며, 이는 자신의 일상을 되돌아보고 싶은 사용자에게 있어 아쉬운 점이 될 수 있음. <br><br><br> **유사 서비스에 대해 Chatbot Diary가 가지는 장점** <br><li> 사용자가 자신의 감정을 직접 선택하는 방식이 아니라 AI가 대화 내용을 기반으로 감정을 분석해 도출하기 때문에, 사용자 스스로도 인지하지 못했던 감정 상태를 새롭게 알게 될 수 있음. <br><li> 감정 분석 시 점수를 기반으로 대표 감정 하나와 부가 감정 여러 개를 함께 도출하여, 복잡한 감정 상태를 보다 정확하게 반영할 수 있음. <br><li> AI와의 대화가 미리 정해진 틀이나 질문 형식에 국한되지 않고 자유롭게 이루어지기 때문에, 사용자의 표현 자유도가 높아지고 더 정확한 감정 도출이 가능함. <br><li> 사용자의 과거 대화 기록과 일기 내용이 모두 데이터베이스에 저장되기 때문에, 언제든 사용자가 원할 때 자신의 기록을 되돌아볼 수 있음. <br><li> 캘린더 인터페이스를 사용해 사용자로 하여금 과거의 감정들을 돌아보고 추이를 확인할 수 있게 해줌. |
| (3) 제안 내용 | **1.프라이버시 걱정 없는 대화 상대** : Target Customer가 느끼는 외로움을 해소하기 위해 민감한 대화 주제를 얘기하더라도 해당 대화내용이 퍼질 걱정 없이 믿을 만한 대화 상대. <br><br> **2.달력 페이지에서 메인 감정별로 그래프 제공** : 상대방의 기분이나 상태를 과하게 신경쓰지 않더라도 마음 편하게 부정적 얘기를 나눌 수 있는 대화 상대. <br><br> **3.짧은 시간으로 쓸 수 있는 일기 서비스** : 바쁜 일상으로 인해 시간적 피로를 겪는 Target Customer을 위해 짧은 시간으로도 사용할 수 있는 일기 서비스. <br><br> **4.부담 없는 감정 정리 서비스** : 굳이 번거롭게 시간을 들여 하루 일과를 돌아보지 않더라도 대신 감정을 알아내고 정리해주는 감정 정리 서비스. <br><br> **5.개별 사용자에게 맞춘 대화 상대** : 사용자 개개인의 평소 습관이나 행동 방식을 분석하여 지금 어떤 감정을 느끼고 있는지 정확하게 파악하고 공감해주는 개별 사용자에게 맞춘 대화 상대. |
| (4) 기대효과 및 의의 | 공감형 AI 챗봇을 통한 실시간 대화는 사용자에게 언제든 편하게 감정을 털어놓을 수 있는 대화 상대가 되어주며, 외로움과 사회적 고립감을 해소하는 데 도움을 준다. 특히 민감한 감정이나 부정적인 이야기조차 프라이버시 걱정 없이 자유롭게 나눌 수 있는 환경을 제공하여, **사용자의 심리적 안정감에 긍정적인 영향을 미칠 수 있다.** <br> 또한, 사용자는 별도의 시간과 노력을 들이지 않고도 짧은 대화를 통해 하루를 돌아보고 감정을 정리할 수 있으며, 요약 AI가 대화 내용을 바탕으로 자동 생성한 일기를 통해 자연스럽게 자신의 일상을 돌아볼 기회를 얻게 된다. 그리고 대화 내용을 기반으로 한 감정 분석 결과는 점수화 및 시각화되어 제공되므로, **사용자는 자신의 감정 상태를 한눈에 파악하는 것이 가능하다.** |
| (5) 주요 기능 리스트 | **1. ChatGpt API에게 공감 능력에 최적화된 친한 친구 같은 프롬프트 적용** : 사용자의 감정을 파악하고 이에 대해 무작정 이성적인 조언을 해주거나 의미 없는 반응만을 반복하는 것이 아닌 제대로 사용자에게 공감하는 답변을 할 수 있도록 팀에서 자체적으로 AI의 답변에 대한 공감 능력 평가를 실시했고, 해당 평가의 결과를 기반으로 공감 능력에 최적화된 프롬프트를 도출해 AI 모델에 직접 적용한다. <br><br> **2. AI와의 대화 내용을 기반으로 한 일기 작성** : 사용자의 바쁜 일상을 고려해 대중교통을 기다리거나 하는 식의 일상 속 짧은 자투리시간 동안 채팅을 나누면 해당 채팅을 통해 AI가 하루동안 사용자에게 일어난 여러 사건들 중 사용자의 감정에 큰 영향을 미친 사건을 3개 이하로 고르고, 그렇게 고른 사건들을 위주로 일기를 대신 작성해 준다. <br><br> **3. AI와의 대화 내용을 기반으로 한 사용자의 감정 추출** : 사용자가 자투리 시간동안 작성한 채팅을 통해 AI가 사용자의 감정을 추출할 수 있도록, 사용자가 가장 강하게 느낀 감정, 해당 감정을 갖게 된 이유, 해당 감정의 정도가 100점 만점 중 몇 점 인지, 가장 강하게 느낀 감정 말고도 또 두드러지게 나타난 다른 감정들에는 무엇이 있는 지 등등을 추출하는 프롬프트 작성한다. 이 프롬프트를 통해 사용자의 감정을 도출한 AI는 사용자가 이를 확인할 수 있도록 해당 결과를 일기 페이지에 시각화 해서 나타낸다. <br><br> **4. FireBase를 통한 사용자의 데이터 개별 관리** : 사용자가 AI와 나눈 대화 기록을 FireBase에 저장하고 이를 이용해 실시간으로 데이터 저장 및 조회가 가능하다. 대화 내용 및 날짜 등의 변화가 생길 때마다 실시간으로 FireBase의 내용을 업데이트하여 사용자의 데이터를 적절히 관리할 수 있다. <br><br> **5. 일자별로 채팅 세션을 별도 관리** : 날짜 별로 사용자와의 대화 세션을 별도로 구분해 관리함으로써, 해당 일자 동안의 사용자의 감정에 집중할 수 있도록 하고, 사이드 메뉴를 통해 지난 날짜에 일어난 사건 및 느낀 감정들을 한 눈에 확인할 수 있도록 한다. 또한 사용자는 언제든 개별 분리된 세션을 통해 지난 날짜의 채팅 기록 및 일기를 확인할 수 있다. <br><br> **6. 달력 페이지에서 해당 날짜의 사용자의 감정 시각화** : 실제 달력 화면을 적용한 뒤 해당 날짜에 사용자가 가장 강하게 느낀 감정은 무엇인지와, 그 감정에 해당하는 이모티콘을 날짜 밑에 같이 시각화함으로써 사용자가 자신의 지난 감정들을 한 눈에 확인할 수 있도록 해준다. <br><br> **7. 달력 페이지에서 메인 감정별로 그래프 제공** : 각 메인 감정이 주차별로 몇 번이나 나타났는지 꺾은선 그래프로 제공하여 사용자로 하여금 특정 감정이 지속되거나 잦아지는 시점을 스스로 인식할 수 있게 한다. <br><br>  **8. 달력 페이지에서 한달간의 감정 추이 확인** : 달력 페이지에서 달력 뿐 아니라, 해당 한 달동안 사용자가 어떤 감정을 몇 번 느꼈는지, 가장 많인 느낀 감정과 가장 적게 느낀 감정은 무엇인지 등을 통계내어 함께 표현함으로써 사용자로 하여금 해당 한 달간 자신의 감정 추이를 쉽게 확인할 수 있게 해준다. <br><br> **9. AI의 감정 추이 분석** : AI가 한달 중 "같은 감정이 가장 길게 이어진 주간"에 대해 사용자가 해당 주간동안 그런 감정을 느끼는데에 가장 영향을 끼친 단어들을 3개 추출하고, 해당 주간에 대해 코멘트를 남김으로서 사용자 본인도 몰랐던 새로운 시각에서 지난 날들을 돌아볼 수 있다. <br><br> **10. AI의 잘못된 판단에 대해 사용자가 직접 피드백할 수 있는 기능** : AI가 사용자가 느낀 감정에 대해 잘못된 감정을 주요 감정이라고 분석하거나 보다 강렬한 감정을 두고 빈도가 적은 감정을 주요 감정이라고 표현하는 등의 잘못된 판단을 내린 경우 사용자가 직접 해당 분석 결과에 대해 어느 부분이 잘못되었는지 피드백을 작성할 수 있고 AI는 이 피드백을 기반으로 사용자에 대해 다시 학습하게 된다. |

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EB%B3%84%EC%83%81%EC%84%B8%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD.png> <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/E-R%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8.png> |
| (2) 전체 시스템 구성 | <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EC%8B%9C%EC%8A%A4%ED%85%9C%EA%B5%AC%EC%84%B1_%EC%88%98%EC%A0%95%EB%B3%B8.png> <br> 사용자는 React 기반 클라이언트를 통해 채팅을 입력하고, 입력된 텍스트는 Firebase Functions로 전송되어 감정 분석 및 요약 처리가 진행된다. 처리 과정 중 OpenAI API가 텍스트 분석, 요약 및 챗봇 응답 생성을 수행한다. 분석 결과 및 대화 요약은 Firestore에 저장되고, 대시보드를 통해 시각화된다.|  
| (3) 주요엔진 및 기능 설계 | **1.AI 챗봇 (GPT-4 API 사용)** <br><li> 입력: 사용자의 채팅 텍스트 <br><li> 처리: GPT-4 API를 호출하여 문맥을 파악하고 자연스럽게 대화 진행 <br><li> 출력: 공감형 대화 응답 제공 <br><br> **2.대화 요약 AI (GPT-4 API 사용)** <br><li> 입력: 사용자의 전체 채팅 로그 <br><li> 처리: GPT-4 API를 이용해 요약된 일기 형식으로 변환 <br><li> 출력: 일기 형태의 텍스트 반환 <br><br> **3.감정 분석 AI (GPT-4 API 사용)** <br><li> 입력: 사용자 채팅 텍스트 <br><li> 처리: 감정 분석 API를 호출하여 감정을 점수화 <br><li> 출력: 감정 점수 (예: 긍정 0.8, 부정 0.2) <br><br> **4.데이터 저장 및 관리 (Firebase)** <br><li> 사용자 계정 정보 저장 (이메일, 비밀번호) <br><li> 일기 및 감정 분석 데이터 저장 <br><li> 날짜별 감정 점수 저장 <br><br> **5.감정 시각화 및 캘린더 UI** <br><li> 감정 점수를 기반으로 날짜별 대표 감정을 이모티콘으로 표시 <br><li> 감정 점수 변화를 그래프로 시각화 <br><li> 특정 날짜 클릭 시 해당 일기 및 감정 분석 결과를 조회 <br><br> **주요 기능 모듈** <br><br> **ChatGPT API 연동 모듈** : AI와 사용자간의 대화 내용에 대한 감정 분석 및 이를 기반으로 한 일기 작성 기능을 위해 ChatGPT API 연동 모듈을 도입 <br><br> 해당 모듈의 구현에 관하여, 먼저 HTTP 클라이언트 라이브러리인 fetch 를 사용하여 OPEN AI 의 ChatGPT-4o model을 호출한다. 그리고 대화 내용이 저장된 chatHistory 변수를 포함한 POST 요청을 보내면 이 요청은 Bearer ${process.env.REACT_APP_OPENAI_API_KEY} 인증 방식을 통해 OPEN AI 서버에게 보내진다. <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EC%97%B0%EB%8F%99%EB%AA%A8%EB%93%88_%EC%9E%90%EB%A3%8C1.png> <br><br> 해당 요청을 받은 서버는 미리 입력된 프롬프트에 따라 요청을 처리하고, 답변을 출력한 뒤 JSON.stringfy()를 통해 JSON 형식으로 응답을 반환한다. 이렇게 반환된 데이터에는 Open AI 서버로 전달된 대화 내용을 기반으로 ChatGPT 가 도출한 사용자의 감정 및 일기 내용이 저장되어 있다. 이 모듈을 통해 감정 분석 및 일기 작성 이라는 기능을 실시간으로 처리할 수 있게 된다. <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EC%97%B0%EB%8F%99%EB%AA%A8%EB%93%88_%EC%9E%90%EB%A3%8C2.png> <br><br> **Firestore 모듈** : 채팅 내용 저장 및 관리 기능을 위해 Firestore모듈을 도입(추후 감정분석결과와 일기도 저장하도록 수정할 예정) <br><br> 두 가지 컬렉션(chatLog, chatMessagesByDate)을 사용하고, 날짜 기준으로 데이터를 관리한다. <br><br> 1.	컬렉션 참조 설정 : chatLogRef는 전체 채팅 로그 모음이고, chatMessagesRef는 날짜별 채팅 메시지를 저장하는 컬렉션이다. 날짜별로 문서를 만들어서 기록을 정리하는 구조이다. <br><br> 2.	날짜 키 설정 : 사용자가 보고 있는 날짜가 있으면 그것을 기준으로, 없으면 오늘 날짜를 기준으로 currentKey를 만들고 Firestore에서 날짜별 문서를 구분하기 위한 ID로 사용한다. <br><br> 3.	Firestore에서 데이터 불러오기 : 앱이 처음 로드되면 chatLog랑 chatMessagesByDate 상태를 초기화하고, 각각 Firestore에서 데이터를 가져와서 상태로 저장한다. <br><br> 4.	Firestore에 데이터 저장하기 : chatLog나 chatMessagesByDate 상태가 바뀌면 자동으로 Firestore에도 업데이트되도록 useEffect를 써서 구현한다. chatLog는 각 로그를 log.date 기준으로 문서를 만들어 저장하고, chatMessagesByDate는 날짜별 메시지를 하나의 문서에 배열로 저장한다. |
| (4) 주요 기능의 구현 | **1.공감 능력에 최적화된 프롬프트 사용** <br> 기능의 목적 : 사용자가 챗봇의 답변을 작위적으로 느끼지 않고, 자연스럽고 친근하게 느낄 수 있도록 하는 것 <br><br> **기존 챗봇의 답변** <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84_%EA%B8%B0%EC%A1%B4%EB%8C%80%ED%99%94%EA%B8%B0%EB%A1%9D.png> <br><li> **표현이 딱딱하고 건조함** : 기계적인 말투로 인해 진짜 사람이 사용자의 감정에 공감한다는 느낌이 들지 않음. <br><li> **사용자에 관한 공감 부족** : 늦잠을 자서 기분이 안 좋다는 사용자에게 공감하거나 위로하는 말 없이 오직 늦잠을 잔 이유에 대해서만 물어봄. <br><li> **표현의 다양성이 부족함** : 대다수의 답변이 "~했구나", "~했어" 라는 비슷한 어미를 사용하면서 대화가 단조롭고 작위적으로 느껴짐. <br><br> **문제 해결을 위한 해결책** <br><li> 사용자에게 친한 친구같은 느낌을 주기 위해 일부러 비격식적 호칭이나 줄임말, 유행어, 약간의 욕설들을 사용하도록 지시함. <br><li> AI나 상담사 같은 말투는 금지한 채 인간다운 말투, 친구다운 말투를 유지할 것을 지시함. <br><li> 신나거나 유쾌한 상황에는 자신도 같은 상황을 겪는 것처럼 사용자의 감정에 과몰입해줄 것을 지시함. <br><li> 반대로 진지한 상황에서는 사용자의 감정을 지지해줄것을 지시함. <br><li> 사용자가 속상해 하는 상황에서 AI 특유의 교육적인 말투가 아닌 자신이 그 감정에 공감해주고 있다는 것을 보여주기 위해 감정이 실린 반응 위주로 해줄 것을 지시함. <br><br> **해당 해결책을 바탕으로 수정된 프롬프트** <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EC%88%98%EC%A0%95%ED%95%9C%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8.png> <br><br> **수정된 프롬프트를 기반으로 재출력된 챗봇의 답변** <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84_%EC%88%98%EC%A0%95%EB%90%9C%EB%8C%80%ED%99%94%EA%B8%B0%EB%A1%9D1.png> <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84_%EC%88%98%EC%A0%95%EB%90%9C%EB%8C%80%ED%99%94%EA%B8%B0%EB%A1%9D2.png> <br><br>**2.피드백 반영이 가능한 일기** <br> 기능의 목적 : AI의 일기 작성 및 감정 도출의 기능을 더욱 사용자 맞춤으로 정확하게 만드는 것 <br><br> **기존 일기 내용** <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84_%ED%94%BC%EB%93%9C%EB%B0%B1%EA%B8%B0%EB%8A%A51.png> 사용자와의 대화를 기반으로 일기가 생성됨. <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84_%ED%94%BC%EB%93%9C%EB%B0%B1%EA%B8%B0%EB%8A%A53.png> 일기 내용을 조금 더 구체화시킬 수 있도록 추가적인 정보를 더한 뒤 피드백을 전송함. <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84_%ED%94%BC%EB%93%9C%EB%B0%B1%EA%B8%B0%EB%8A%A56.jpg> <img src=https://github.com/daeun1022/ewhafallcapston/blob/main/Images/%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84_%ED%94%BC%EB%93%9C%EB%B0%B1%EA%B8%B0%EB%8A%A55.png> 사용자가 입력한 피드백 내용이 무사히 파이어베이스에 저장되고, AI의 프롬프트에도 적용되어 새로 고침 시 일기에 "반복적으로 에러가 발생했다" 라는 추가적인 내용이 무사히 반영됨. <br><br> **모듈과 관련된 기능** <br><br> **ChatGPT API 연동 모듈** : AI와 사용자 간의 대화 내용에 대한 감정 분석 및 이를 기반으로 한 일기 작성 기능과 관련 <br><br> **1)	감정 분석 기능** : 감정 분석 기능은 ChatGPT API 모듈을 통해 모듈이 사용자와 AI간의 대화 내용을 기반으로 사용자의 감정 상태를 실시간으로 추적하고 분석하는 주요 기능이다. <br><br> 1.	대화 내용 수집 및 전처리 : 사용자가 입력한 메시지 및 해당 메시지에 관한 AI의 답변은 실시간으로 수집됨. 이렇게 수집된 대화 내용은 감정 분석을 위한 기본 데이터로 사용되며 AI가 해당 대화 내용을 바탕으로 감정을 추출할 수 있도록 구조화된 데이터 형식으로 변환되어 ChatGPT API 에게 전송됨. <br><br> 2.	감정 분석 및 예측 : ChatGPT API 연동 모듈은 미리 작성해둔 프롬프트를 기반으로 사용자의 감정을 분석. 대화 내용이 모듈에게 전송되면, 모듈은 먼저 텍스트를 기반으로 입력된 자연어를 처리함. 대화 맥락을 이해하고, 감정의 강도를 분석한 뒤 가장 적절하다고 생각하는 답변을 생성함. <br><br> 3.	결과 처리 및 반영 : API가 사용자의 감정을 분석한 뒤 해당 결과를 반환하면 이를 AI의 답변으로서 사용자에게 실시간으로 전달함. <br><br> **2) 일기 작성 기능** : 일기 작성 기능은 사용자와 AI간의 대화 내용을 통해 사용자의 감정에 가장 큰 영향을 미친 사건을 위주로 대신 일기를 작성해 주는 주요 기능이다. <br><br> 1. 대화 내용 수집 및 분석 : 사용자와 AI간의 대화 내용이 ChatGPT API 모듈에게 전송되면, 먼저 감정 분석 기능에 의해 사용자의 감정이 추출되고 그와 동시에 대화의 주요 내용이 요약됨. 이 정보를 바탕으로 일기 작성 기능의 기본 데이터를 준비함. <br><br> 2.	일기 작성 및 요약 : 대화에서 나타난 사용자의 주요 감정 및 해당 감정에 영향을 미친 사건을 바탕으로 AI는 자동으로 일기 내용을 생성함. <br><br> 3.	감정 및 요약 반영 : 이렇게 생성된 일기 내용은 일기 페이지에 바로 반영되고 또한 일기 텍스트뿐 아니라 미리 추출해 둔 사용자의 주요 감정들도 함께 시각화해서 드러냄 <br><br><br>	**Firestore 연동 모듈** : Firestore 연동 모듈은 사용자와 AI 간의 대화 데이터, 감정 분석 결과, 요약 정보, 일기 데이터를 저장 및 관리하는 기능과 관련. <br><br> **1)	대화 및 분석 결과 저장 기능** : Firestore는 사용자와 AI의 대화 내용, 감정 분석 결과 및 요약된 정보 등을 안정적으로 저장하고 관리하는 역할을 한다. <br><br> 1.	데이터 수집 및 저장 구조 설계 : 사용자와 AI의 대화가 발생할 때마다 해당 대화 내용, 감정 분석 결과, 요약 정보가 생성. 이러한 데이터는 사용자별로 구분된 Firestore 컬렉션에 저장되며, 각 문서는 날짜 기반으로 구성되어 하루 단위로 관리됨. <br><br> 2.	구조화된 데이터 저장 : 저장되는 데이터는 채팅 기록, 감정 점수, 감정 카테고리, 요약 문장 등의 필드를 포함하는 구조화된 형태로 Firestore 문서에 기록됨. 이로 인해 사용자별 기록을 시간 순서대로 정렬하거나 분석하는 데 용이함. <br><br> 3.	데이터 활용을 위한 관리 기능 구현 : Firestore에 저장된 데이터는 대시보드 및 일기 작성 기능에 활용됨.. 예를 들어, 일기 생성 시 해당 날짜의 감정 데이터와 대화 요약을 Firestore에서 불러와 사용자가 하루를 돌아볼 수 있도록 도와줌 <br><br> **2)	날짜 기반 문서 관리 기능** : Firestore 모듈은 시간 순서대로 데이터를 관리할 수 있도록 날짜 기반 문서 구조를 도입한다. 이 기능은 사용자 감정 추세 시각화, 특정 날짜 기록 조회 등에 활용된다. <br><br> 1.	문서 ID를 날짜 기준으로 설정 : 각 사용자별 컬렉션 하위에 저장되는 문서의 ID는 YYYY-MM-DD 형식의 날짜 문자열로 설정되어 있으며, 해당 날짜의 전체 대화 및 분석 결과가 하나의 문서에 집약되어 관리됨 <br><br> 2.	날짜별 데이터 자동 생성 및 업데이트 : 사용자가 새로운 대화를 시작하면, 해당 날짜의 문서가 존재하지 않을 경우 자동으로 새 문서를 생성하고, 이후 대화가 발생할 때마다 해당 문서에 계속해서 내용이 업데이트됨 <br><br> 3.	효율적인 조회 및 시각화 : 이 구조 덕분에 특정 날짜의 데이터를 쉽게 불러올 수 있으며, 사용자 감정의 시간적 변화를 그래프로 나타내는 등 데이터 시각화 작업이 용이해짐 |
| (5) 기타 | 챗봇의 공감 능력 및 친밀한 말투를 평가하기 위해 사용한 기준들 <br><br> **공감능력 평가** <br><li> **메시지 길이** : 단답형(예 : "ㅇㅇ", "그렇구나")보다는 풍부한 내용으로 반응하는지. <br><li> **회피 vs 공감 패턴** : 감정적인 내용이 나왔을 때 대화를 다른 주제로 돌리는 패턴이 있는지. <br><li> **질문 비율** : 상대방이 감정이나 경험을 더 이야기할 수 있도록 유도하는 질문 사용 빈도. <br><li> **긍정 vs 부정 응답 비율** : "괜찮아", "잘될 거야" 같은 긍정적 피드백과 "그건 좀 아닌 것 같아" 같은 부정적 피드백의 비율 비교. <br><li> **공감 표현 빈도** : "이해해", "그럴 수 있어", "힘들었겠다" 등의 공감 표현 사용 횟수. <br><li> **감정 반영** : 상대방의 감정을 반영하는 단어 사용 여부. (예 : "나도 그런 경험 있어", "너무 속상하겠다”) <br><br> **친밀한 말투 평가** <br><li> **비격식 호칭 사용** : “야” 같은 비격식적 호칭이나 반말을 사용 <br><li> **이모지/의성어** : 이모지 혹은 “ㅜㅜ” “ㅋㅋ” 등의 감정을 간편하게 표현할 수 있는 의성어를 사용 <br><li> **유머/밈** : 인터넷에서 유행하고 있는 유머나 밈을 대화 중에 자연스럽게 섞어 대화하기 편한 분위기를 형성 <br><li> **감정 공유 표현** : 상대방의 감정에 대해 “나도 기쁘다“ 혹은 “같이 열받네“ 등의 표현을 사용해 자신도 같은 감정을 느끼고 있음을 공유 <br><li> **상호작용 유도** : 대화의 주제에 관련한 후기 공유를 요구하거나, “같이 가자“ “같이 놀자“ 등의 표현을 사용 <br><li> **과거 언급/연결** : 상대방과의 공통된 예전 이야기나 경험을 회상 |

<br>
